<!DOCTYPE html>
<html>
  <head>
    <% include ./partials/head %>
    <link rel="stylesheet" href="../assets/css/service.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.12.4.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  </head>
  <body>
    <header>
      <% include ./partials/header %>
    </header>
    <div class="card" id="super-card">
      <div class="super-panel-heading">
        <a href="#" class="channel-name stripe-two">Service</a>
      </div> 
      <div class="card" id="sub-card">
        <div id="accordion" class="widget">
          <div class="panel panel-default">
            <div class="panel-heading" id="heading-one">
              <h4 class="panel-title">
                Step 1: Service Type <a class="changer" id="changeType" onclick="undo('#collapse1', '#collapse2', '#collapse3', '#collapse4', '#collapse5')" style="visibility:hidden"> Change </a>
                </h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse in">
              <div class="issue-description">
                <p1>Please select the type of
                <br>request that you have</p1>
              </div>
              <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle status" id="type-button" type="button" data-toggle="dropdown">Request Type
                <span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-inverse">
                  <li><a href="#">System Access</a></li>
                  <li><a href="#">Move Equipment</a></li>
                  <li><a href="#">New Software</a></li>
                  <li><a href="#">New Equipment</a></li>
                  <li><a href="#">Surplus Equipment</a></li>
                </ul>
              </div>        
              <div id="next-btn">
                <button type="button" class="btn btn-primary" onclick="toggleAccordian('#collapse1', '#collapse2'); colorHeader('#heading-one', '#changeType')">Next</button>                
              </div>
            </div>          
          </div>
        </div>
      </div>
    </div>
   
    <script>
      function postData(req, res){
        var http = new XMLHttpRequest();
        console.log("clicked the submit button");
        console.log($("#type-button").text());
        var params = "EquipmentType=" + $("#type-button").text() + "&AssetTag="+ $('#asset-tag-text').val() + "&Name=" + $('#name-text').val() + "&Description=" + $('#text-block').val()
        +"&ErrorMessageText=" + document.getElementById('text-block-2').value;
        console.log(params);
        var url = "/createHardware";
        console.log("sent " + http.status + " " + http.readyState);
        http.open("POST", url, true);
        console.log(url + " " + http.status + " " + http.readyState);
        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        http.onreadystatechange = function() {//Call a function when the state changes.
          if(http.readyState == 4 && http.status == 200) {
            console.log(http.responseText);
          }
        };
        http.send(params);
        console.log("sent " + http.status + " " + http.readyState);
        return true;
      };
    </script>
    
    <script>
    function colorHeader(header, change){
      $(change).css('visibility', 'visible');
      $(header).css('background-color', 'rgb(170,170,170)');
    };
    </script>
    
    <script>
    function toggleAccordian(close, open, header){
        $(close).collapse("toggle");
        $(open).collapse("toggle");
      };
    </script>
    
    <script>
      function undo(open, close1, close2, close3, close4){
        $(close1).collapse("hide");
        $(close2).collapse("hide");
        $(close3).collapse("hide");
        $(close4).collapse("hide");
        $(open).collapse("show");
      };
    
    </script>
    
    <script> 
      $(document).ready(function(){
        $('.dropdown-inverse li > a').click(function(e){
        console.log("swapping");
        var content = 
        
        '<div class="panel panel-default">' +
           ' <div class="panel-heading" id="heading-one">'+
             ' <h4 class="panel-title">'+
              '  Step 2: System Access <a class="changer" id="changeType" onclick="undo("#collapse1", "#collapse2", "#collapse3", "#collapse4", "#collapse")" style="visibility:hidden"> Change </a>'+
                '</h4>'+
           ' </div>'+
            '<div id="collapse1" class="panel-collapse collapse in">'+
             ' <div class="issue-description">'+
                '<p1>Please select the type of'+
               ' <br>system that you need to access</p1>'+
             ' </div>'+
             ' <div class="dropdown">'+
               ' <button class="btn btn-primary dropdown-toggle status" id="type-button" type="button" data-toggle="dropdown">Request Type'+
                '<span class="caret"></span></button>'+
               ' <ul class="dropdown-menu dropdown-inverse">'+
                 ' <li><a href="#">System Access</a></li>'+
                 ' <li><a href="#">Move Equipment</a></li>'+
                 ' <li><a href="#">New Software</a></li>'+
                  '<li><a href="#">New Equipment</a></li>'+
                 ' <li><a href="#">Surplus Equipment</a></li>'+
                '</ul>'+
             ' </div>     '   +
             ' <div id="next-btn">'+
                '<button type="button" class="btn btn-primary" onclick="toggleAccordian("#collapse1", "#collapse2"); colorHeader("#heading-one", "#changeType")">Next</button>  '              +
             ' </div>'+
            '</div> ' +        
          '</div>'+
      '  </div>';
        

        
        
        console.log(content);
        $('#accordion').append(content);
        console.log("appended");
        $('#accordion').accordion("refresh");
        console.log("changing status");
        $('.status').text(this.innerHTML);
        console.log("exiting");
        });
      });
    </script>

    <footer>
      <% include ./partials/footer %>
    </footer>
    
  </body>
</html> 